<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>CPU Emulator</title>
	<meta name="format-detection" content="telephone=no" />
	<link rel="stylesheet" href="media/reset.css" />
	<link rel="stylesheet" href="media/style.css" />
	<script src="media/jquery.js"></script>
	<script src="media/cpu.js"></script>
	<script>
		$(function () {
		    
		    var cpu = new CPU();
		    
		    function load(from, empty, converter) {
                
    		    $('.overlay .values').val(empty);
    		    $('.overlay').show();
    		    $('.overlay .values').focus().select();
    		    
    		    var that =this;
    		    $('.overlay .apply').one('click', function() {
    		    
    		        var values = $('.overlay .values').val();
    		        cpu.load(from, values, converter);
    		        
    		        $('.overlay').hide();
    		    });
		    }
		    
		    $('.instructions .command-load.assembly').on('click', function () {
		        load(100, '100 ADDD #255\n102 NOT\n', cpu.parseAssembly);
		        return false;
		    });
		    
		    $('.instructions .command-load.binary').on('click', function () {
		        load(100, '1000000011111111\n0000000010000000\n', cpu.parseBin);
		        return false;
		    });
		    
		    $('.instructions .command-load.hex').on('click', function () {
		        load(100, '80 FF\n00 80\n', cpu.parseHex);
		        return false;
		    });
		    
		    $('.instructions .command-load.dec').on('click', function () {
		        load(100, '33023\n128\n', cpu.parseDec);
		        return false;
		    });
		    
		    $('.memory .command-load.binary').on('click', function () {
		        load(500, '1111111111111011\n0000000000000011\n', cpu.parseBin);
		        return false;
		    });
		    
		    $('.memory .command-load.hex').on('click', function () {
		        load(500, 'FF FB\n00 03\n', cpu.parseHex);
		        return false;
		    });
		    
		    $('.memory .command-load.dec').on('click', function () {
		        load(500, '-5\n3\n', cpu.parseDec);
		        return false;
		    });
		    
		    $('.command-fast').on('click', function () {
		        cpu.fast();
		        return false;
		    });
		    
		    $('.command-slow').on('click', function () {
		        cpu.slow();
		        return false;
		    });
		    
		    $('.command-step').on('click', function () {
		        cpu.step();
		        cpu.display();
		        $('.instructions .values').scrollTop((cpu.position - 101) * 5);
		        return false;
		    });
		    
		    $('.overlay .cancel').on('click', function() {
		        $('.overlay').hide();
		    });
		});
	</script>
</head>
<body>

<div class="overlay">
    <textarea class="values"></textarea>
    <div class="buttons">
        <input type="button" value="Cancel" class="cancel" />
        <input type="button" value="Load Input" class="apply" />
    </div>
</div>

<div class="cpu">
    
    <div class="left">
        <div class="block commands">
            <p><a href="#" class="command-fast">Fast run</a>, <a href="#" class="command-slow">Slow run</a>, <a href="#" class="command-step">Step</a></p>
        </div>
        
        <div class="block decoded">
            <h2>Decoded Instruction:</h2>
            <ul class="values">
                <li><em>R00</em> LWD R3, #40</li>
            </ul>
        </div>
        
        <div class="block register">
            <h2>Register:</h2>
            <ul class="values">
                <li><em>R00</em> 0010101111101100 0010101111101100 <em>23</em></li>
                <li><em>R01</em> 0010101111101100 0010101111101100 <em>523</em></li>
                <li><em>R02</em> 0010101111101100 0010101111101100 <em>-66841</em></li>
                <li><em>R03</em> 0010101111101100 0010101111101100 <em>25</em></li>
            </ul>
        </div>
        
        <div class="block info">
            <h2>Instruction Count:</h2>
            <ul class="values">
                <li>9999</li>
            </ul>
        </div>
    </div>
    
    <div class="right">
        <div class="block instructions">
            <h2>Instructions (Load <a href="#" class="command-load assembly">Assembly</a>, <a href="#" class="command-load binary">Binary</a>, <a href="#" class="command-load dec">Dec</a>, <a href="#" class="command-load hex">Hex</a>)</h2>
            <ul class="values">
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li class="active"><em>122</em> 0010101111101100 0010101111101100 <em>CLR R0</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
                <li><em>124</em> 0010101111101100 0010101111101100 <em>SWD R4, #32</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>LWD R3, #40</em></li>
            </ul>
        </div>
    
        <div class="block memory">
            <h2>Memory (Load <a href="#" class="command-load binary">Binary</a>, <a href="#" class="command-load dec">Dec</a>, <a href="#" class="command-load hex">Hex</a>)</h2>
            <ul class="values">
                <li><em>120</em> 0010101111101100 0010101111101100 <em>23</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>54</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>534</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>-234</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>234</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
                <li><em>120</em> 0010101111101100 0010101111101100 <em>0</em></li>
            </ul>
        </div>
    </div>
</div>

</body>
</html>
